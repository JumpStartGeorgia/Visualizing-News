!function(){"use strict";var a=function(){var a=this;a.murs=!0,a.TEXT=0,a.LINK=1,a.EMBED=2,a.onReady=null,a.ready=function(b){b?a.onReady=b:"function"==typeof a.onReady&&a.onReady()},a.embed=function(a,b,c){var d;return d=this.parseURL(a),this.render(b,d,c),!0},a.richify=function(a,b,c){for(var d,e,f,g=/(http(?:s?):[^ <\n]+)/,h=/<.+?>/g,i=/>(.+?)(<|$)/g,j=a.replace(h," "),k=j.match(g)||[],l=a.match(i)||[],m=[],n=0;n<k.length;n++){var o=k[n];for(e=0;e<l.length;e++)f=l[e],m.push(f.replace(o,"<span class='olly'>"+o+"</span>"))}for(console.log(l),e=0;e<l.length;e++){f=l[e];var p=m[e];a=a.replace(f,p)}b.innerHTML=a,d=b.getElementsByClassName("olly");for(var q=0;q<d.length;q++){var r=d[q],s=this.parseURL(r.innerHTML);this.render(r,s,c)}return!0}};if("undefined"!=typeof module&&module.exports){var b=require("jsdom");module.exports=new a,b.env("<html><body></body></html>",function(a,b){module.document=b.document,module.exports.ready()})}else window.olly=new a,window.olly.ready()}(),function(a){"use strict";a.parseURL=function(a){var b,c,d,e,f,g,h,i,j,k,l="undefined"!=typeof module?module.document:window.document;if(c=l.createElement("a"),c.href=a,f={},b=[],c.search)k=c.search;else{var m=a.replace(/#.+/,"").split("?");k=2==m.length?"?"+m[1]:""}if(k&&"?"===k[0])for(j=k.slice(1,k.length),h=j.split("&"),g=0;g<h.length;g+=1)i=h[g].split("="),f[i[0]]=i[1];if(""!==c.pathname)for(d=c.pathname.split("/"),e=0;e<d.length;e+=1)d[e]&&b.push(d[e]);return{url:a,protocol:c.protocol,hostname:c.hostname,port:c.port,pathname:c.pathname,pathchunks:b,querystring:j,query:f,hash:c.hash,host:c.host}}}("undefined"!=typeof module&&module.exports?module.exports:window.olly),function(a){"use strict";a.templates={youtube:'<iframe width="560" height="315" src="{{embedURL}}" frameborder="0" allowfullscreen></iframe>',vimeo:'<iframe src="{{embedURL}}" width="420" height="345" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>',dotsub:'<iframe src="{{embedURL}}" frameborder="0" width="420" height="345"></iframe> ',dailymotion:'<iframe frameborder="0" width="420" height="345" src="{{embedURL}}" allowfullscreen></iframe>',liveleak:'<embed width="420" height="345" src="{{embedURL}}" type="application/x-shockwave-flash" wmode="transparent"></embed>',vine:'<iframe class="vine-embed" src="{{embedURL}}" width="420" height="345" frameborder="0"></iframe><script async src="//platform.vine.co/static/scripts/embed.js" charset="utf-8"></script>',ted:'<iframe src="{{embedURL}}" width="420" height="345" frameborder="0" scrolling="no" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>',imgur:'<img src="{{embedURL}}" />',jsfiddle:'<iframe style="width: 100%; height: 300px" src="{{embedURL}}"></iframe>',twitter_tweet:{markup:'<blockquote class="twitter-tweet" lang="en"><p> <a href="{{embedURL}}"></a></blockquote>',scripts:["//platform.twitter.com/widgets.js"]},twitter_timeline:{markup:'<a class="twitter-timeline" href="{{embedURL}}"></a>',scripts:["//platform.twitter.com/widgets.js"]},github:{markup:'<div class="github-widget" data-repo="{{repo}}"></div>',scripts:["http://abeisgreat.github.io/Github-Repo-Widget/githubRepoWidget.min.js"]},reddit:{scripts:["{{JSONPURL}}?limit=5&callback={{callbackName}}"]},soundcloud:'<iframe width="100%" height="166" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url={{embedURL}}"></iframe>',spotify:'<iframe src="https://embed.spotify.com/?uri=spotify:track:{{embedID}}" width="300" height="380" frameborder="0" allowtransparency="true"></iframe>',twitch:'<object type="application/x-shockwave-flash" height="378" width="620" id="live_embed_player_flash" data="http://www.twitch.tv/widgets/live_embed_player.swf?channel={{channel}}" bgcolor="#000000"><param name="allowFullScreen" value="true" /><param name="allowScriptAccess" value="always" /><param name="allowNetworking" value="all" /><param name="movie" value="http://www.twitch.tv/widgets/live_embed_player.swf" /><param name="flashvars" value="hostname=www.twitch.tv&channel={{channel}}&auto_play=true&start_volume=25" /></object>',gfycat:{markup:'<img class="gfyitem" data-id="{{embedID}}" />',scripts:["http://assets.gfycat.com/js/gfyajax-0.517d.js"]},video:{markup:'<video src="{{embedURL}}" controls="true" autoplay loop></video>'},audio:{markup:'<audio src="{{embedURL}}" controls="true"></audio>'},image:{markup:'<img src="{{embedURL}}" />'}}}("undefined"!=typeof module&&module.exports?module.exports:window.olly),function(a){"use strict";a.domains={youtube:function(a){var b={data:{embedURL:"http://www.youtube.com/embed/"+a.query.v}};return b},youtu:function(a){var b={template:"youtube",data:{embedURL:"http://www.youtube.com/embed/"+a.pathname.slice(1,a.pathname.length)}};return b},vimeo:function(a){var b={data:{embedURL:"//player.vimeo.com/video/"+a.pathchunks[0]}};return b},dotsub:function(a){var b={data:{embedURL:"//dotsub.com/media/"+a.pathchunks[1]+"/embed/"}};return b},dailymotion:function(a){var b={data:{embedURL:"http://www.dailymotion.com/embed/video/"+a.pathchunks[1]}};return b},liveleak:function(a){var b={data:{embedURL:"http://www.liveleak.com/e/"+a.query.i}};return b},vine:function(a){var b={data:{embedURL:"https://vine.co/v/"+a.pathchunks[1]+"/embed/simple"}};return b},ted:function(a){var b={data:{embedURL:"http://embed.ted.com/talks/"+a.pathchunks[1]+".html"}};return b},imgur:function(a){var b={data:{embedURL:"http://i.imgur.com/"+a.pathchunks[0]+".gif"}};return b},jsfiddle:function(a){var b={data:{embedURL:"http://jsfiddle.net/"+a.pathchunks.join("/")+"/embedded/"}};return b},twitter:function(a){var b,c;return b=1===a.pathchunks.length?"twitter_timeline":"twitter_tweet",c={template:b,data:{embedURL:a.url}}},github:function(a){var b={data:{repo:a.pathchunks.join("/")}};return b},reddit:function(b){var c,d,e,f,g;return e="_reddit_"+b.pathchunks[1],f=-1!=b.pathchunks.indexOf("user")?"reddit_user":"reddit_subreddit","reddit_subreddit"==f&&(g="http://www.reddit.com/r/"+b.pathchunks[1]+"/hot/.embed"),"reddit_user"==f&&(g="http://www.reddit.com/user/"+b.pathchunks[1]+"/submitted.embed"),c=a.defer(),window[e]=function(a){c.resolve({markup:a})},d={templatePromise:c.promise,data:{JSONPURL:g,callbackName:e}}},soundcloud:function(a){return{data:{embedURL:a.url}}},spotify:function(a){return{data:{embedID:a.pathchunks[1]}}},twitch:function(a){return{data:{channel:a.pathchunks[0]}}},gfycat:function(a){return{data:{embedID:a.pathchunks[0]}}}}}("undefined"!=typeof module&&module.exports?module.exports:window.olly),function(a){"use strict";a.extensions={image:function(a){return{template:"image",data:{embedURL:a.url}}},video:function(a){return{template:"video",data:{embedURL:a.url}}},audio:function(a){return{template:"audio",data:{embedURL:a.url}}}},a.extensions.jpg=a.extensions.image,a.extensions.jpeg=a.extensions.image,a.extensions.png=a.extensions.image,a.extensions.gif=a.extensions.image,a.extensions.bmp=a.extensions.image,a.extensions.mp4=a.extensions.video,a.extensions.ogv=a.extensions.video,a.extensions.webm=a.extensions.video,a.extensions.ogg=a.extensions.audio,a.extensions.mp3=a.extensions.audio}("undefined"!=typeof module&&module.exports?module.exports:window.olly),function(a,b){"use strict";a.render=function(b,c,d){var e,f,g,h,i,j;if(g=this.findDomain(c),h=this.findExtension(c),!g&&!h||(d||{})[g]==a.TEXT)return"";if(f=(this.domains[g]||this.extensions[h])(c),i=this.templates[f.template||g||h],i&&i.scripts)for(j=0;j<i.scripts.length;j+=1)e=i.scripts[j],this.loadScript(b,a.generate(e,f.data));return f.templatePromise?f.templatePromise.then(function(a){this.display(a,f.data,b)}):this.display(i,f.data,b),!0},a.findDomain=function(a){var b,c,d;d=a.hostname.split(".");for(c in d)if(b=d[c],void 0!==this.domains[b])break;return this.domains[b]?b:!1},a.findExtension=function(a){var b,c;return c=a.pathname.split("."),b=c[c.length-1],this.extensions[b]?b:!1},a.load=function(b){function c(a){d.resolve(a.responseText)}var d=a.defer(),e=new XMLHttpRequest;return e.onload=c,e.open("get",b,!0),e.send(),d.promise},a.loadScript=function(a,c){var d;d=b.createElement("script"),d.type="text/javascript",d.src=c,a.appendChild(d)},a.display=function(b,c,d){"string"==typeof b&&(b={markup:b}),d.innerHTML=a.generate(b.markup,c)},a.generate=function(a,b){var c,d;d=a;for(c in b)d=d.replace(new RegExp("{{"+c+"}}","g"),b[c]);return d}}("undefined"!=typeof module&&module.exports?module.exports:window.olly,"undefined"!=typeof module?module.document:document),function(a){"use strict";a.defer=function(){var b={};return b.promise={then:function(a){b.callback=a,b.resolved&&b.finish()}},b.resolve=function(){b.args=arguments,b.callback&&b.finish(),b.resolved=!0},b.finish=function(){b.callback.apply(a,b.args)},b}}("undefined"!=typeof module&&module.exports?module.exports:window.olly);
